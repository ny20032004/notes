指令、指令系统和汇编语言程序设计
--------------------------------

#### 目录
  1. 指令、操作码、操作数
  2. 寻址方式
  3. 汇编语言相关概念

### 指令、操作码、操作数

* __指令__: 指令是指示计算机执行某项运算或处理功能的命令。

* 要确定一台计算机的指令系统并评价其优劣，通常应从如下4个方面考虑：
  1. 完备性，常用指令齐全，编程方便。
  1. 高效性，程序占内存空间少，运行速度快。
  1. 规整性，执行和数据的使用的规则统一简单，易学易记。
  1. 兼容性，同一系列的低挡计算机的程序能在新的高档机上直接运行。

* 指令的组成
  * 指令由操作数与操作码组成：
      1. 操作码，用于指明本条指令的操作功能。例如算术运算和逻辑运算、读取写入操作等。
      1. 操作数，同于给出被操作的信息（如指令和数据）的地址，包括参加运算的一个或多个操作数所在的地址、运算结果保存的地址等。


* 操作码的组织与编码：
  1. 定长操作码
      * 定长操作码，即操作码长度恒定为8位，一共能表示256个编码状态，也就可以表示256条指令。
      * 计算机字长为 32位或者更长的时候，常使用定长操作码。
      * 定长操作码利于计算机硬件设计，利于提高指令译码，利于提高识别速度。
  1. 变长操作码
      * 计算机字长为8位或者16位时，定长操作码导致操作数位数严重不足，所以常使用变长操作码。
      * 尽可能将常用的、操作数位数要求多的操作设计少位数的操作码。类似Huffman编码思想。
  1. 交叉
      * 即操作码和操作数交叉表示一个操作。
      * 操作码还被分为主操作码和辅助操作码。
      * 这种方案特殊、不常用。

* 指令操作数的个数：
  1. 无操作数指令：
      * 不涉及操作数或者使用某种约定的操作数。
      * 例如有：
          1. 停机指令
          1. 空操作指令
          1. 关中断指令
          1. 堆栈结构的计算机系统中对堆栈中数据运算的指令
  1. 单操作数指令
      * 只有一个操作数的指令。
      * 例如：
          1. 需要一个操作数的指令，如：内容增、减1。
          1. 使用约定的某个操作数，如：指定外设地址的读写操作指令。
          1. 在短字长的采用单个累加器的计算机中，已约定目的操作数和保存计算结果都使用唯一的累加器，指令中只需指定另一个源操作数就可以，称这类指令为单操作数指令。
  1. 双操作数指令
      * 需要分别给出目的操作数和源操作数的地址的指令。其中目的操作数的地址还用于保存本次的运算结果。
      * 例如：
          1. 算术运算指令
          1. 逻辑运算指令
          1. 在寄存器与主存储器之间完成数据传送的指令，需要给出寄存器编号和存储器地址。
  1. 多操作数指令
      * 例如：
          1. 三个操作数为：源操作数、目的操作数、保存本次运算结果的地址。

* 指令操作数个数的说明：
    * 前三种情况字长相对短，执行速度高，计算机硬件结构相对简单，在不同类型的计算机中广泛被使用。
    * 最优一种更低地应用在字长较长的大中型计算机中。

* 操作数的来源、去向：
  1. CPU内部的通用寄存器。
  1. 外围设备接口中的一个寄存器。通常用设备编号、设备入出端口地址或设备映像地址（与内存储器地址统一编址的一个设备地址编号）来表示。
  1. 内存储器的一个存储单元。给出该存储单元的地址。
  1. 立即数(immediate number).

* 指令的分类
    * 算术与逻辑运算指令。不同档次计算机之间有差异。
    * 移位操作数指令。包括算术移位、逻辑移位、循环移位三种。
    * 数据传送类指令。实现通用寄存器之间、通用寄存器与内存储器之间、内存储器不同存储单元之间、通用寄存器与外围设备（接口）之间（或者单独划分为输入输出指令）的数据传送功能。根据内存储器与外围设备操作性质的不同，又可分为读、写操作，指明数据传送的方向。
    * 转移类指令、子程序调用与返回指令用于解决变动程序中指定执行次序的需求。简单指出变动程序中指令执行次序的指令。
        * 子程序调用指令与返回指令可以被理解为一种特定的转移指令。
    * 特权指令
        * 仅用于操作系统或其他操作系统的治疗你给，为确保系统与数据的安全，这一类指令不提供给用户使用。


### 寻址方式
  1. 立即数寻址
    * 操作数直接在指令字中给出，即指令字中直接给出的不是操作数地址而是操作数本身。
    * 作用：把一个确定的数据直接用于计算或传送到一个通用的寄存器中。
    * 数据的位数与数据位置
      1. 若数据占用地址位数较少时，可将数据安排在第一个指令字中（即操作码与立即数在同一个单元中），则读出操作码的同时也读取立即数。此时指令称为单字指令。
      1. 若位数较多，第一个指令字不足以存放数据，则将数据放在第二个指令中。此时指令称为双字指令。
  1. 直接寻址
    * 直接寻址是指在指令的操作数地址字段直接给出操作数在存储器中的地址，这也是计算机中常用的寻址方式之一。
    * “直接地址数位”与“直接地址存放位置”和立即数寻址类似。（单字指令、双字指令）
  1. 寄存器寻址
    * 寄存器寻址是指在指令字中的操作数地址字段直接给出操作数所在的通用寄存器的编号（名字、地址），由于通用寄存器数目较少，表示一个通用寄存器编号占用的位数就少，有利于缩短指令字的长度。
    * 从通用寄存器取数参加运算以及用通用寄存器临时保存运算结果都更迅速方便，所以这是最基本、最常用的寻址方式。
  1. 寄存器间接寻址
    * 当寄存器中给出的不是一个操作数，而是操作数地址时，就可以用这一地址去读写存储器的相关单元，这种方法被称为寄存器间接寻址，这也是最基本、最常用的寻址方式之一。
  1. 变址寻址
    * 变址寻址是指把指令字中给出的一个数值（称为变址偏移量）与指定的一个寄存器（称为变址寄存器）的内容相加之和作为操作数的地址，用于读写存储器。
    * 变址寻址特别适合数组型数据。
    * 依据允许的变址偏移量范围的大小，使用变址寻址的治疗你给可能为单字或者双字，甚至三字指令。
  1. 相对寻址
    * 相对寻址是指把指令字中给出的一个数值（称为相对寻址偏移量）与程序计数器PC的内容相加之和作为操作数的地址或转移指令的地址进行转移。
    * 与变址寻址不同：计算实际地址所用的寄存器已确定为PC，所以无需再在指令中指定。而变址寻址中可用的变址寄存器往往有多个，通常要在指令的地址相对的距离是固定的。
    * 相对寻址也有单字指令和双字指令。
  1. 基地址寻址
    * 基地址寻址是指把程序中所用的地址与一个特定的寄存器（称为基地址寄存器）的内容相加之和作为操作数的地址或者指令的地址。
    * 基地址寻址主要用于为多道程序或浮动地址程序定位存储器空间。
    * 由系统程序用特权指令设定，通常不允许用户在子集的程序中对其进行修改。
  1. 间接寻址
    * 简洁寻址是指在指令字的地址字段中给出的既不是一个操作数的地址，也不是下一条指令的地址，而是一个操作数地址的地址或者一条指令地址的地址。
    * 间接寻址的效率会低。
  1. 堆栈寻址
    * 堆栈是存储器（或专用寄存器组）中一块特定的按“后进先出”原则管理的存储区，该存储区中被读写单元的地址是用一个特定的寄存器给出的，该寄存器被称为堆栈指针（Stack Pointer，SP）。


### 汇编语言相关概念
  * 汇编语言的程序结构：
    1. 顺序执行
    1. 无条件转义执行
    1. 条件分支
    1. 循环执行
    1. 子程序调用与返回
