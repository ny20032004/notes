计算机的控制器部件
------------------

#### 目录
  1. 控制器功能、组成与指令执行步骤
  1. 硬连接控制器部件
  1. 微程序控制器部件


### 控制器功能、组成与指令执行步骤
  1. 控制器部件：
    * 执行一条指令步骤：
      1. 读取指令
      1. 分析指令
      1. 执行指令
    * 控制器保证计算机能够按照程序中设定的指令运行次序，自动地连续执行指令序列。
    * 控制器必须由一些具有不同处理功能的逻辑线路（部件）组成。
    * 控制器部件与另外五个部件通过数据总线、地址总线和控制总线连接在一起。
      1. 运算器部件通过数据总线与内存储器、输入设备和输出设备传送数据。
      1. 输入设备和输出设备通过接口电路与总线相连接。
      1. 内存储器、输入设备和输出设备从地址总线接收地址信息，从控制总线得到控制信号，通过数据总线与其他部件传送数据。
      1. 控制器部件从数据总线接收指令信息，从运算器部件接受执行转移地址，送出指令地址到地址总线，还向系统中各部件提供他们运行所需要的控制信号。
    * 控制器的4个主要子部件：
      1. 程序计数器（PC），用于提供指令在内存中的地址的部件，服务于读取指令，可进行内容加1和接收新的指令地址，并给出下一条将要执行的指令地址。
      1. 指令寄存器（IR），用于接收并保存从内存储器读出来的指令内容的部件，在执行本条指令的整个过程中，为系统运行提供指令本身的主要信息。
      1. 指令执行的步骤标志线路，用于标记出每条指令的各个执行步骤的相对次序关系，保证每一条指令按设定的步骤序列一次执行。
      1. 全部控制信号的产生部件，一句指令操作码、指令的执行步骤（时刻），以及一些另外的条件信号，来形成或提供当前执行执行步骤中计算机各个部件要用到的控制信号。计算机硬件系统在这些信号控制下协同运行，执行指令，产生预期的执行结果。
  2. 执行的执行步骤
    1. 相关知识：
      1. 指令功能与指令格式。操作码与操作数。
      1. 运算器中的累加器。累加器内容可以是操作数、操作数地址、指令的地址或用于完成寻址计算的有关内容。
      1. 内存储器的存储单元。要读写内存储器的某一存储单元的内容，通常要经过两个执行步骤：
          1. 把这一存储单元的地址送到地址寄存器以驱动地址总线，用以选择存储器的一个单元。
          1. 向存储器发出读写命令，为读操作时还要把读出的内容保存到相关的寄存器中；为写操作时要把准备写入内存储器的数据（可能在CPU的某个寄存器中）送到数据总线上，用以向内存储器提供写入的数据。
      1. 输入输出设备接口的寄存器。完成对输入输出设备的读写操作，多数情况下是在CPU与响应设备的接口卡的某一个寄存器之间完成，通常要经过两个步骤：
          1. 把这一输入输出设备的入出端口地址送到地址寄存器以驱动地址总线，用以选择相关接口电路中的一个寄存器
          1. 向接口卡发出读写命令，为度操作时候（IN指令）还要把读出的内容保存在响应的寄存器中；为写命令时（OUT指令）还要把准备写到接口卡的寄存器中的数据（可能已经在CPU的某个寄存器中）送到数据总线上，向接口卡提供写入的数据。
          * 在将输入输出设备与内存储器共同编址的系统中，不使用专门的输出输出指令，读写输入输出和读写内存储器使用相同的指令格式和寻址方式。
      1. 指令执行过程通常为：
          1. 读取指令
          1. 指令译码
          1. 读寄存器组
          1. 算术逻辑单元执行运算（ALU）
          1. 读写内存或接口
          1. 数据写回寄存器组
      1. 需要注意的是：
          * 不是所有指令都需要经过以上五个步骤才能完成执行。
          * 指令执行过程中，一定要形成下一条指令的地址并传送到PC中，这是保证计算机能够连续并自动地执行程序中的指令所必须的。


### 硬连接控制器部件
  * 硬连接控制器又称为组合逻辑控制器，与微程序控制器共同构成计算机通用的两大类控制器。
  * 优缺点：
      * 优点： 形成控制信号所需的信号传输延迟时间短，对提高系统运行速度有利。
      * 缺点： 形成控制信号的电路设计比较复杂。


### 微程序控制器部件
  * 微程序控制器基本运行原理：用多条微指令解释执行每一条指令的功能，硬件组成中的核心线路是一个被称为控制存储器的部件（ROM芯片实现），用于保护犹微指令（指令一个执行步骤用到的控制信号的集合）组成的微程序。
  * 在程序执行过程中，一次从控制存储器中读出一条微指令，用微指令中的微命令字段控制各执行部件的运行，并用下一地址字段形成下一条微指令地址，使微程序可以连续运行。
  * 微程序控制器的四个子部件：
      1. 程序计数器PC， 用于保存一条指令在内存个中的地址，服务于读取指令，通常有自行增量功能，并可以接收改变执行次序时需要提供的指令地址。
      1. 指令寄存器IR，用于保存从内存读来的指令内容，以便提供执行指令的过程中要用到的指令本身的主要信息。
      1. 控制存储器（简称控存）和微指令寄存器，控存用于保存微程序，微指令寄存器用于暂存从控存中读出的一条微指令，设置微指寄存器可以提高微程序的执行效率。
      1. 微指令下的地址线路，用于向控制存储器提供读操作使用的地址，解决读出和执行微指令的次序。
  * 指令 与 微指令 的关系与区别：
      * 指令是指示计算机硬件系统完成一项最基本的运算或者处理功能的命令，使用的全部指令组成一台计算机的指令系统，用于构建完成各种复杂的计算任务或信息管理等功能的程序，运行中的程序将保存到住存储器中。指令是程序设计人员与计算机系统沟通和交互的媒介。
      * 微指令则是直接控制计算机硬件线路完成指令功能的控制信号的集合，被划分为微命令字段和下地址字段两大部分。计算机厂家用微指令设计解释每一条指令执行过程微程序，微程序被固化在控制存储器中。微指令是指令与计算机硬件电路之间建立联系的媒介。
  * 从以下几个角度来理解微程序控制器的基本组成和运行原理：
      1. 计算机的基本功能功能是执行程序，程序是机器指令的一个序列。所以计算机应能在控制器指挥下连续地自动地执行该机器指令序列中的每一条指令。自动地、连续地执行机器指令的核心问题在于，应该按指令的序列关系自动地逐条地从内存储器中读出每一条指令，分析、执行这条指令，并保证这一运行过程连续地进行。__连续计数器PC__在这一过程起到关键作用
          * 保存一条指令在在内存中的地方，服务于运行指定的存储单元读取指令
          * 自行增量功能用于形成相邻的下一条指令的地址
          * 接收一条新的指令的地址用于变动指令的执行顺序
    从内存内存储器读取出来的指令内容将保存在指令__指令寄存器IR__
          * 在指令执行的整个过程中，将由IR来提供用到的指令内容（指令操作码和形式地址）。
      1. 计算机系统中，执行每一条指令都要经过读取治疗你给、分析指令以及执行这条指令的规定的具体操作等几个操作步骤。在微程序控制器中指令的每一个执行步骤被称为一个微周期（又称CPU周期），完成一或几项微操作功能，要使用一条微指令提供控制计算机各部件运行的微命令（控制信号），遗体哦啊机器指令使用的几条微指令组成一个微程序。全部指令使用的所有微程序被有序地整合成一个整体，并被固化在__控制存储器__中，这个控制存储器是微程序控制器的核心部件。由在需要某条微指令的时候，微指令寄存器从控制存储器读取并传送到计算机的各个功能部件。
      1. 在微程序控制器中，需要通过微指令__下地址线路__提供下一条微指令的地址。
